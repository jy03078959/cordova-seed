define("eventManager",function(t,n,r){function s(t){this.msgslot=t,this.msgs=[];var n=t.fire,r=t.async;this.fire=function(){n.apply(t,arguments)},this.async=function(){r.apply(t,arguments)}}var e=function(){var t={bind:function(t,n){if(t&&"string"==typeof t&&n&&n.constructor&&"function"==typeof n){var r=this.events[t];r||(r=this.events[t]=[]);for(var s=r.length;s--;)if(r[s]==n)return!1;return r.push(n),!0}return!1},unbind:function(t,n){if(t&&t.constructor&&t.constructor==String){if(!n)return delete this.events[t],!0;if(n&&"function"==typeof n){var r=this.events[t];if(r&&r.length){for(var s=r.length;s--;)if(r[s]==n){r.splice(s,1);break}return!0}return!1}}return!1},clear:function(){this.events=[]},fire:function(t){var n;if(t&&"string"==typeof t&&(n=this.events[t])&&n.length){for(var r,s=Array.prototype.slice.call(arguments,1),e=0;r=n[e++];)r.apply(window,s);return!0}return!1},count:function(t){var n=this.events[t];return n?n.length:0},getProxy:function(){return new s(this)}};return t.events=[],t};s.prototype={bind:function(t,n){var r=this.msgslot.bind(t,n);return r&&this.msgs.push([t,n]),r},unbind:function(t,n){var r=this.msgslot,s=this.msgs;if(n&&"function"==typeof n){for(var e=r.unbind(t,n),i=s.length;--i>=0;)s[i][0]==t&&s[i][1]==n&&s.splice(i,1);return e}for(var i=this.msgs.length;i--;)s[i][0]==t&&(r.unbind(t,s[i][1]),s.splice(i,1));return!0},dispose:function(){if(null!=this.msgs){for(var t=this.msgs,n=this.msgslot,r=t.length;r--;)n.unbind(t[r][0],t[r][1]);this.msgslot=null,this.msgs=null}}},r.exports=e});