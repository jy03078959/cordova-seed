define("components/common/Server",function(t,e,a){function o(){return{_authorization:"Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0IjoxNDUwNjA3MjY5ODI5LCJpIjoxLCJhIjoxLCJpYXQiOjE0NTA2MDcyNjl9.Tt3jRY98e8EB6PMGIOzTGz7BhDWUIiXMlxdJFqmMinY",_session:"",init:function(){},ajax:function(t){var e=this;if(!t.noAuth&&""==e._authorization)return void r.log("需要登陆信息");t.needLoading&&EMA.fire("load.show");try{var a={type:"POST",cache:!1,memory:!1,timeout:3e4,beforeSend:function(t){t.setRequestHeader("Accept","application/json"),this.noAuth?t.setRequestHeader("authorization",""):t.setRequestHeader("authorization",e._authorization)},dataType:"json",accepts:"json",contentType:"application/json"};t.data=t.data||{},$.extend(a,t),t.url||(a.url=i.host+t.action)}catch(o){r.log(o)}a.success=function(e){EMA.fire("load.hide"),t.success(e)},a.error=function(e,a){EMA.fire("load.hide");var o=e.responseJSON||{};if("200"==e.status);else if("400"==e.status)alert(o.errorMsg||"输入参数有误");else if("401"==e.status)EMA.fire("login.logout"),alert(o.errorMsg||"用户授权过期。请重新登陆");else switch(e.status){case 404:alert("请求资源不存在");break;case 500:alert("服务器内部错误");break;default:switch(a){case"parsererror":alert("数据解析错误");break;case"timeout":alert("请求超时");break;case"abort":alert("连接被终止");break;default:alert("其它错误 status:"+e.status+" message:"+e.statusText)}}"function"==typeof t.error&&t.error()},"POST"==a.type&&(a.url=a.url,a.data=JSON.stringify(a.data)),r.log("ajaxData",a.data),$.ajax(a)},setAuthorization:function(t){var e=this;i.develop||(e._authorization=t)},getAuthorization:function(){var t=this;return t._authorization},getSession:function(){var t=this;return t._session},setSession:function(t){var e=this;i.develop||(e._session=t)}}}var r=t("components/common/Util"),i=t("components/common/Config");a.exports=o});