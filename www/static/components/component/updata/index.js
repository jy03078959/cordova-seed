define("updata/index",function(n,o,e){var t=n("vue.js"),s=n("components/common/BaseComponent.js");e.exports=t.component("c-updata",t.extend({mixins:[s],className:"updata",template:'<div id="updata" :class="[show ? \'\' : \'hide\']">\n    <div class="mask">\n        <div class="progress">\n\n            <div class="progress-bar"></div>\n            <div class="progress-info">\n                {{progressInfo}}\n            </div>\n        </div>\n    </div>\n</div>',data:function(){return{show:!1,updateAvailable:!1,progressInfo:""}},ready:function(){var n=this;window.UpdateMg&&(console.log("更新组件存在,设置更新路径，检查是否有新版本"),window.UpdateMg.setConfig(Config.updataUrl),n.$options.check())},check:function(){var n=this;window.UpdateMg.check(function(o){console.log("updateAvailable",o),o&&(n.vue.updateAvailable=!0,n.vue.progressInfo="存在新版本，开始更新",n.download())})},onProgress:function(n){var o=this;o.vue.progressInfo="下载进度："+parseInt(100*n.percentage)+"%",console.warn(n)},download:function(){var n=this;n.vue.show=!0,n.vue.progressInfo="开始下载",window.UpdateMg.download(function(o){n.onProgress(o)},function(o){console.log("下载成功",o),n.vue.progressInfo="下载成功，重新启动",n.vue.show=!1,n.update()},function(o){n.vue.show=!1,console.log("下载失败",o),confirm("下载失败，是否重新下载",function(){n.download()})})},update:function(){console.log("更新代码"),window.UpdateMg.update()},initEvent:function(){var n=this;return window.UpdateMg?(n.bindEvent("check",function(){n.check()}),n.bindEvent("download",function(){n.download()}),void n.bindEvent("update",function(){n.update()})):void console.log("不支持更新，不存在 updatemg对象")},methods:{check:function(){var n=this;n.$options.check()},download:function(){var n=this;n.$options.download()},update:function(){var n=this;n.$options.update()}}}))});